---
title: "Women's Soccer Data"
---

We'll use this notebook to explore some NCAA women's soccer data and [our questions](https://docs.google.com/spreadsheets/d/1G1AjH2iS6kj3kKHCRi0XVy5Lcm-rahJkeTAToVh9J1g/edit?gid=0#gid=0). First, let's load the tidyverse library:

```{r}
library(tidyverse)
```

We'll want to start with 2025 match data, which is located in [this GitHub repository](https://github.com/dwillis/NCAAWomensSoccerData). We can load the match data directly from GitHub using `read_csv`:


```{r}
matches_2025 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv") |> mutate(diff=team_score-opponent_score, total_goals = goals +defensive_goals)

matches_2024 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv") |> mutate(diff=team_score-opponent_score, total_goals = goals +defensive_goals)
```

Let's take a look at this data to see what it contains, using `head` and `glimpse`:

```{r}
head(matches_2025)
glimpse(matches_2025)
```

Now, onto the questions using aggregates, which means `group_by` and `summarize`:

1. How many shots in total has Maryland attempted and how many have been on goal? Calculate a percentage of shots on goal.


```{r}
maryland_shots <- matches_2025 |>
  group_by(team) |>
  summarise(
    total_shots = sum(sh_att),
    shots_on_goal = sum(so_g),
    percentage_on_goal = (shots_on_goal / total_shots) * 100
  )
```

It is a 54.21 percent shots on goal percentage, with 83 shots and 45 on goal. 

2. What about the same shot stats from last season's first four games? You'll need to load the matches from 2024 - just change the season in the URL - and filter by date to find the first four games.

```{r}
matches_2024 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv")
```
```{r}
head(matches_2024)
glimpse(matches_2024)
```
```{r}
maryland_2024 <- matches_2024 |>
  filter(team == "Maryland Terrapins, Terps")

```

```{r}
maryland_shots_2024 <- matches_2024 |>
  filter(team == "Maryland Terrapins, Terps",
         date >= "2024-08-15",
         date <= "2024-08-25") |>
  summarise(
    total_shots = sum(sh_att),
    shots_on_goal = sum(so_g),
    percentage_on_goal = (shots_on_goal / total_shots) * 100
  )
```

Maryland took 38 shots on the first four games of 2024, with 20 on goal and a 52.63 on goal percentage. 


3. Maryland started 2022 with 4 draws. Have any other teams had as many this season?

```{r}
head(matches_2025)
glimpse(matches_2025)
```
```{r}
four_draws_2025 <- matches_2025 |>
  arrange(date) |>
  group_by(team) |>
  filter(row_number() <= 4) |>
  summarise(total_draws = sum(outcome == "Draw")) |>
  filter(total_draws >= 4)
```

The Cal Poly Mustangs have opened this season with four draws. 

4. How many total corner kicks has Maryland had so far this season and how many have its opponents have? Calculate the difference between the two totals for every team using group_by, summarize and mutate, then filter to find Maryland's totals.

```{r}
team_corners <- matches_2025 |>
  group_by(team) |>
  summarise(
    team_corners = sum(corners),
    opp_corners  = sum(defensive_corners)
  ) |>
  mutate(corners_difference = team_corners - opp_corners)
```

Maryland had 28 corners, while its opponents had 22, with a positive difference of six more for Maryland. 


5. What's the most interesting thing you've seen from these questions?


I found the four-draws answer the most interesting. It’s unusual for a team to start a season with four straight ties, since that requires a mix of resilience and missed opportunities to both win and lose. In Maryland’s case, it stood out because the team wasn’t particularly strong that year, yet they still managed to grind out results and keep each game close enough to avoid defeat. It shows how results can sometimes mask underlying struggles—on paper they were unbeaten, but the string of draws also hinted at their limitations.




TEST

```{r}
matches_2025 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv") |> mutate(diff=team_score-opponent_score, total_goals = goals +defensive_goals)

matches_2024 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv") |> mutate(diff=team_score-opponent_score, total_goals = goals +defensive_goals)
```

```{r}
t.test(matches_2024$total_goals, matches_2025$total_goals)
```

```{r}
t.test(
  matches_2024$total_goals[matches_2024$team == "Maryland Terrapins, Terps"],
  matches_2025$total_goals[matches_2025$team == "Maryland Terrapins, Terps"]
)
```
*** Nationwide scoring is up. The NCAA average rose from 2.75 total goals per match in 2024 to 2.90 in 2025, and the difference is statistically significant (Welch t-test p = 0.00047). 

It suggests something real changed across the board. Maybe early-season mismatches inflated scores, or turnover on the back line outpaced improvements in goalkeeping. It could also be tactical with more teams pressing higher and trading chances --- but whatever the cause, the national data says the ball is going in more often.

For Maryland, the picture is quieter. Maryland games ticked up from 2.68 to 2.88 total goals on average, but the test isn’t significant (p = 0.766). 

That seems like small-sample noise and a stable team profile — slight movement year to year that doesn’t clear the bar. Roster continuity, opponent mix and a few close, low-event games can flatten the signal.***
